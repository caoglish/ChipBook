"use strict";(self["webpackChunkchipbook"]=self["webpackChunkchipbook"]||[]).push([[619],{619:function(e,l,a){a.r(l),a.d(l,{default:function(){return J}});var i=a(6768),t=a(4232),d=a(554),r=a(2729),s=a(1606),o=a(697),n=a(3745),y=a(61),u=a(5035),p=a(6935),c=a(2067),m=a(4587),h=a(9094),k=a(1247),_=a(7861),f=a(4600);const b=(0,m.j)({...(0,u.V)(),...(0,h.cJ)((0,y.O)(),["inline"])},"VCheckbox"),g=(0,k.RW)()({name:"VCheckbox",inheritAttrs:!1,props:b(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,l){let{attrs:a,slots:t}=l;const d=(0,c.q)(e,"modelValue"),{isFocused:r,focus:s,blur:o}=(0,p.i)(e),n=(0,_.v6)(),m=(0,i.EW)((()=>e.id||`checkbox-${n}`));return(0,f.C)((()=>{const[l,n]=(0,h.ph)(a),p=u.Z.filterProps(e),c=y.M.filterProps(e);return(0,i.bF)(u.Z,(0,i.v6)({class:["v-checkbox",e.class]},l,p,{modelValue:d.value,"onUpdate:modelValue":e=>d.value=e,id:m.value,focused:r.value,style:e.style}),{...t,default:e=>{let{id:l,messagesId:a,isDisabled:r,isReadonly:u,isValid:p}=e;return(0,i.bF)(y.M,(0,i.v6)(c,{id:l.value,"aria-describedby":a.value,disabled:r.value,readonly:u.value},n,{error:!1===p.value,modelValue:d.value,"onUpdate:modelValue":e=>d.value=e,onFocus:s,onBlur:o}),t)}})})),{}}});var D=a(6329),v=a(1772),P=a(9669),F=a(5728);const V={class:"headline"};function C(e,l,a,y,u,p){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(d.D,{color:"primary",onClick:e.openDialog},{default:(0,i.k6)((()=>[(0,i.eW)("添加玩家")])),_:1},8,["onClick"]),(0,i.bF)(D.Py,{headers:e.headers,items:e.players},{"item.actions":(0,i.k6)((({item:l})=>[(0,i.bF)(d.D,{icon:"",onClick:a=>e.editPlayer(l)},{default:(0,i.k6)((()=>[(0,i.bF)(P.w,null,{default:(0,i.k6)((()=>[(0,i.eW)("mdi-pencil")])),_:1})])),_:2},1032,["onClick"]),(0,i.bF)(d.D,{icon:"",onClick:a=>e.confirmDeletePlayer(l.id)},{default:(0,i.k6)((()=>[(0,i.bF)(P.w,null,{default:(0,i.k6)((()=>[(0,i.eW)("mdi-delete")])),_:1})])),_:2},1032,["onClick"])])),_:1},8,["headers","items"]),(0,i.bF)(v.p,{modelValue:e.dialog,"onUpdate:modelValue":l[3]||(l[3]=l=>e.dialog=l),"max-width":"500px"},{default:(0,i.k6)((()=>[(0,i.bF)(r.J,null,{default:(0,i.k6)((()=>[(0,i.bF)(s.r,null,{default:(0,i.k6)((()=>[(0,i.Lk)("span",V,(0,t.v_)(e.editingPlayer?"编辑玩家":"添加玩家"),1)])),_:1}),(0,i.bF)(o.O,null,{default:(0,i.k6)((()=>[(0,i.bF)(F.W,{modelValue:e.player.player_name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.player.player_name=l),label:"玩家固定名称",readonly:e.editingPlayer,color:e.editingPlayer?"grey":"primary",dense:e.editingPlayer,class:"readonly-text-field",required:""},null,8,["modelValue","readonly","color","dense"]),e.editingPlayer?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(g,{key:0,modelValue:e.sameName,"onUpdate:modelValue":l[1]||(l[1]=l=>e.sameName=l),label:"玩家显示名称与玩家固定名称相同",onChange:e.syncDisplayName},null,8,["modelValue","onChange"])),!e.sameName||e.editingPlayer?((0,i.uX)(),(0,i.Wv)(F.W,{key:1,modelValue:e.player.player_display_name,"onUpdate:modelValue":l[2]||(l[2]=l=>e.player.player_display_name=l),label:"玩家显示名称",required:""},null,8,["modelValue"])):(0,i.Q3)("",!0)])),_:1}),(0,i.bF)(n.S,null,{default:(0,i.k6)((()=>[(0,i.bF)(d.D,{color:"blue darken-1",onClick:e.savePlayer},{default:(0,i.k6)((()=>[(0,i.eW)("保存")])),_:1},8,["onClick"]),(0,i.bF)(d.D,{color:"grey darken-1",onClick:e.closeDialog},{default:(0,i.k6)((()=>[(0,i.eW)("取消")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.bF)(v.p,{modelValue:e.deleteDialog,"onUpdate:modelValue":l[5]||(l[5]=l=>e.deleteDialog=l),"max-width":"400px"},{default:(0,i.k6)((()=>[(0,i.bF)(r.J,null,{default:(0,i.k6)((()=>[(0,i.bF)(s.r,{class:"headline"},{default:(0,i.k6)((()=>[(0,i.eW)("确认删除")])),_:1}),(0,i.bF)(o.O,null,{default:(0,i.k6)((()=>[(0,i.eW)("您确定要删除这个玩家吗？此操作无法撤销。")])),_:1}),(0,i.bF)(n.S,null,{default:(0,i.k6)((()=>[(0,i.bF)(d.D,{color:"red darken-1",onClick:l[4]||(l[4]=l=>e.deletePlayer(e.confirmedDeleteId))},{default:(0,i.k6)((()=>[(0,i.eW)("确认")])),_:1}),(0,i.bF)(d.D,{color:"grey darken-1",onClick:e.closeDeleteDialog},{default:(0,i.k6)((()=>[(0,i.eW)("取消")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var W=a(7617),w=a(8174);const x=w.A;var N=(0,i.pM)({name:"PlayerPage",data(){return{headers:[{title:"ID",key:"id"},{title:"玩家固定名称",key:"player_name"},{title:"玩家显示名称",key:"player_display_name"},{title:"操作",value:"actions",sortable:!1}],players:[],dialog:!1,deleteDialog:!1,editingPlayer:!1,player:{player_name:"",player_display_name:""},sameName:!0,confirmedDeleteId:null}},methods:{openDialog(){this.dialog=!0,this.editingPlayer=!1,this.player={player_name:"",player_display_name:""},this.sameName=!0},closeDialog(){this.dialog=!1},confirmDeletePlayer(e){this.deleteDialog=!0,this.confirmedDeleteId=e},closeDeleteDialog(){this.deleteDialog=!1,this.confirmedDeleteId=null},syncDisplayName(){this.sameName&&(this.player.player_display_name=this.player.player_name)},async fetchPlayers(){const e=(0,W.rJ)(x,"players"),l=await(0,W.GG)(e);this.players=l.docs.map((e=>({id:e.id,...e.data()})))},editPlayer(e){this.dialog=!0,this.editingPlayer=!0,this.player={...e}},async deletePlayer(e){const l=(0,W.H9)(x,"players",e);await(0,W.kd)(l),this.closeDeleteDialog(),this.fetchPlayers()},async savePlayer(){const e=(0,W.rJ)(x,"players");if(this.editingPlayer){const e=(0,W.H9)(x,"players",this.player.id);await(0,W.mZ)(e,{player_display_name:this.player.player_display_name})}else{this.sameName&&(this.player.player_display_name=this.player.player_name);const l={player_name:this.player.player_name,player_display_name:this.player.player_display_name};await(0,W.gS)(e,l)}this.closeDialog(),this.fetchPlayers()}},created(){this.fetchPlayers()}}),U=a(1241);const I=(0,U.A)(N,[["render",C]]);var J=I}}]);